<html><head><TITLE>StopWatch</TITLE>
<meta name="viewport" content="width=device-width,height=device-height"/>
<script type="text/javascript">
var t, t1, t2, o, run = false, ms = 0, x, y, b, dn = false;
function about () {
  alert ("(c) vera5.com, 2011");
}
function ctrl () {
  if (run)
    stop ();
  else
    start ();
}
function init () {
  o = document.getElementById ('t');
}
function pad2 (n) {
  return (n < 10 ? '0' : '') + n;
}
function reset () {
  stop ();
  ms = 0;
  o.innerHTML = "00:00:00";
}
function tick () {
  t2 = new Date ();
  var dx = ms + t2.getTime () - t1.getTime ();
  var dd = Math.floor (dx/1000/60/60/24);
  dx -= dd * 1000*60*60*24;
  var hh = Math.floor (dx/1000/60/60);
  dx -= hh * 1000*60*60;
  var mm = Math.floor (dx/1000/60);
  dx -= mm * 1000*60;
  var ss = Math.floor (dx/1000);
  o.innerHTML = pad2 (hh) + ':' + pad2 (mm) + ':' + pad2 (ss);
}
function stop () {
  clearInterval (t);
  ms += t2.getTime () - t1.getTime ();
  o.title = "Start";
  run = false;
}
function start () {
  t1 = new Date ();
  t = setInterval ("tick()", 200);
  o.title = "Stop";
  run = true;
}
function kDown(e) {
	dn = true;
	if (!e) e = window.event;
	x = e.pageX;
	y = e.pageY;
	b = new Date().getTime();
	o.addEventListener("mousemove", function(e){
		if (dn) console.log("move dx="+(x - e.pageX)+" dy="+(y - e.pageY));
	}, true);
}
function kUp(e) {
	dn = false;
	if (!e) e = window.event;
	o.removeEventListener("move", this, false);
	if ((new Date().getTime() - b) > 500)	// Long-press
		alert("Long-press detected\nx: "+x+"->"+e.pageX+"\ny: "+y+"->"+e.pageY+"\nt: "+(new Date().getTime() - b));
	else
		ctrl();
}
</script>
<style type="text/css">
a	{ text-decoration: none; color: #ff0; }
body	{ background-color: #121; color: #fff; font-family: sans-serif; }
#t	{ font-size: 3em; font-weight: bold; color: #FFFFFF; cursor: pointer; }
</style>
</head>
<body onload="init()">

<table height="100%" width="100%">
 <tr><td colspan=3>&nbsp;</td></tr>
 <tr height="5%">
  <td align="center" width="35%"><a href="javascript:reset()" title="Click to reset">&equiv;</a></td>
  <td align="center" width="30%" id="t" onMouseDown="kDown(event)" onMouseUp="kUp(event)" title="Click to Start">00:00:00</td>
  <td align="center" width="35%"><a href="javascript:about()" title="About">&copy;</a></td>
 </tr>
 <tr><td colspan=3>&nbsp;</td></tr>
</table>

</body></html>
